kind: pipeline
type: docker
name: default

steps:
- name: greeting and sleep
  image: golang:1.12
  commands:
  - echo "hello"
  - sleep 20

- name: env and sleep
  image: golang:1.12
  commands:
  - env
  - sleep 20

- name: slack
  image: plugins/slack
  settings:
    webhook:
      from_secret: slack_webhook
    channel: general

- name: docker-build
  image: plugins/docker
  settings:
    username:
      from_secret: docker_username
    password:
      from_secret: docker_password
    repo: kafuhamada/sample
    tags: latest

trigger:
  branch:
    - master
  event:
    - pull_request
